<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!-- ============================================
     REGISTRATION PAGE
     ============================================
     This is the public registration page where new users
     can create accounts as either a student or employer.

     Features:
     - Form with validation for all fields
     - Full name, email, password fields
     - Role selection (STUDENT or EMPLOYER)
     - Displays validation errors
     - Error message for duplicate emails
     - Link back to login page

     The controller passes an empty "user" object for form binding
     ============================================ -->

<head th:replace="fragments/header :: head">
    <!-- Import head section with CSS and meta tags -->
</head>

<body style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 2rem 0;">

<!-- ============================================
     REGISTRATION CONTAINER
     ============================================
     Centered white card with registration form -->
<div style="width: 100%; max-width: 550px; margin: 0 auto; padding: 0 1rem;">

    <div class="card" style="box-shadow: 0 10px 40px rgba(0,0,0,0.2);">

        <!-- =====================
             HEADER WITH LOGO
             ===================== -->
        <div style="text-align: center; margin-bottom: 2rem;">
            <i class="fas fa-user-plus" style="font-size: 3rem; color: #667eea;"></i>
            <h2 style="margin-top: 1rem; color: #333;">Create Your Account</h2>
            <p style="color: #666; margin-top: 0.5rem;">Join the Campus Job Board</p>
        </div>

        <!-- ============================================
             ERROR MESSAGE
             ============================================
             Shown when registration fails
             (e.g., email already exists) -->
        <div class="alert alert-danger" th:if="${errorMessage}">
            <i class="fas fa-exclamation-circle"></i>
            <span th:text="${errorMessage}">Error message</span>
        </div>

        <!-- ============================================
             REGISTRATION FORM
             ============================================
             Uses Thymeleaf's form binding with th:object
             Submits POST request to /register -->
        <form th:action="@{/register}"
              th:object="${user}"
              method="post">

            <!-- =====================
                 FULL NAME FIELD
                 =====================
                 Required field with validation -->
            <div class="form-group">
                <label for="fullName">
                    <i class="fas fa-user"></i> Full Name <span style="color: red;">*</span>
                </label>
                <input type="text"
                       id="fullName"
                       th:field="*{fullName}"
                       class="form-control"
                       th:classappend="${#fields.hasErrors('fullName')} ? 'field-error' : ''"
                       placeholder="e.g., John Smith"
                       required>

                <!-- Display validation error if exists -->
                <div class="error-message" th:if="${#fields.hasErrors('fullName')}">
                    <i class="fas fa-exclamation-circle"></i>
                    <span th:errors="*{fullName}">Name error</span>
                </div>
            </div>

            <!-- =====================
                 EMAIL FIELD
                 =====================
                 Required field with email validation -->
            <div class="form-group">
                <label for="email">
                    <i class="fas fa-envelope"></i> Email Address <span style="color: red;">*</span>
                </label>
                <input type="email"
                       id="email"
                       th:field="*{email}"
                       class="form-control"
                       th:classappend="${#fields.hasErrors('email')} ? 'field-error' : ''"
                       placeholder="your.email@example.com"
                       required>

                <!-- Display validation error if exists -->
                <div class="error-message" th:if="${#fields.hasErrors('email')}">
                    <i class="fas fa-exclamation-circle"></i>
                    <span th:errors="*{email}">Email error</span>
                </div>

                <!-- Help text -->
                <small style="color: #666;">
                    <i class="fas fa-info-circle"></i>
                    Use your campus email address
                </small>
            </div>

            <!-- =====================
                 PASSWORD FIELD
                 =====================
                 Required field with minimum length validation -->
            <div class="form-group">
                <label for="password">
                    <i class="fas fa-lock"></i> Password <span style="color: red;">*</span>
                </label>
                <input type="password"
                       id="password"
                       th:field="*{password}"
                       class="form-control"
                       th:classappend="${#fields.hasErrors('password')} ? 'field-error' : ''"
                       placeholder="At least 6 characters"
                       required>

                <!-- Display validation error if exists -->
                <div class="error-message" th:if="${#fields.hasErrors('password')}">
                    <i class="fas fa-exclamation-circle"></i>
                    <span th:errors="*{password}">Password error</span>
                </div>

                <!-- Help text -->
                <small style="color: #666;">
                    <i class="fas fa-info-circle"></i>
                    Must be at least 6 characters long
                </small>
            </div>

            <!-- =====================
                 ROLE SELECTION FIELD
                 =====================
                 Radio buttons to choose between STUDENT and EMPLOYER
                 Admin accounts are created manually, not through registration -->
            <div class="form-group">
                <label style="display: block; margin-bottom: 0.5rem;">
                    <i class="fas fa-user-tag"></i> I am registering as: <span style="color: red;">*</span>
                </label>

                <!-- Radio button container -->
                <div style="display: flex; flex-direction: column; gap: 1rem;">

                    <!-- STUDENT OPTION -->
                    <label style="display: flex; align-items: center; padding: 1rem; border: 2px solid #ddd; border-radius: 5px; cursor: pointer; transition: all 0.3s;"
                           onmouseover="this.style.borderColor='#667eea'; this.style.background='#f8f9fa';"
                           onmouseout="this.style.borderColor='#ddd'; this.style.background='white';">
                        <input type="radio"
                               th:field="*{role}"
                               value="STUDENT"
                               required
                               style="margin-right: 1rem;">
                        <div>
                            <strong style="display: block; color: #667eea; font-size: 1.1rem;">
                                <i class="fas fa-user-graduate"></i> Student
                            </strong>
                            <small style="color: #666;">
                                I'm looking for campus job opportunities
                            </small>
                        </div>
                    </label>

                    <!-- EMPLOYER OPTION -->
                    <label style="display: flex; align-items: center; padding: 1rem; border: 2px solid #ddd; border-radius: 5px; cursor: pointer; transition: all 0.3s;"
                           onmouseover="this.style.borderColor='#667eea'; this.style.background='#f8f9fa';"
                           onmouseout="this.style.borderColor='#ddd'; this.style.background='white';">
                        <input type="radio"
                               th:field="*{role}"
                               value="EMPLOYER"
                               required
                               style="margin-right: 1rem;">
                        <div>
                            <strong style="display: block; color: #667eea; font-size: 1.1rem;">
                                <i class="fas fa-user-tie"></i> Employer
                            </strong>
                            <small style="color: #666;">
                                I want to post job opportunities for students
                            </small>
                        </div>
                    </label>
                </div>

                <!-- Display validation error if exists -->
                <div class="error-message" th:if="${#fields.hasErrors('role')}">
                    <i class="fas fa-exclamation-circle"></i>
                    <span th:errors="*{role}">Role error</span>
                </div>
            </div>

            <!-- =====================
                 INFORMATION ALERT
                 ===================== -->
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i>
                <strong>Note:</strong> Your account will be created with ACTIVE status
                and you can log in immediately after registration.
            </div>

            <!-- =====================
                 SUBMIT BUTTON
                 ===================== -->
            <button type="submit" class="btn btn-primary w-100" style="padding: 1rem; font-size: 1.1rem;">
                <i class="fas fa-user-plus"></i> Create Account
            </button>
        </form>

        <!-- ============================================
             DIVIDER
             ============================================ -->
        <div style="text-align: center; margin: 2rem 0; color: #999;">
                <span style="background: white; padding: 0 1rem; position: relative; z-index: 1;">
                    or
                </span>
            <div style="border-bottom: 1px solid #ddd; position: relative; top: -12px; z-index: 0;"></div>
        </div>

        <!-- ============================================
             LOGIN LINK
             ============================================
             Link back to login page for existing users -->
        <div style="text-align: center;">
            <p style="color: #666; margin-bottom: 1rem;">
                Already have an account?
            </p>
            <a th:href="@{/login}" class="btn btn-secondary w-100">
                <i class="fas fa-sign-in-alt"></i> Sign In Instead
            </a>
        </div>

    </div>

    <!-- ============================================
         FOOTER INFO
         ============================================ -->
    <div style="text-align: center; margin-top: 2rem; color: white;">
        <p>
            <i class="fas fa-info-circle"></i>
            Campus Job Board System - Connecting Students with Opportunities
        </p>
    </div>

</div>

</body>
</html>