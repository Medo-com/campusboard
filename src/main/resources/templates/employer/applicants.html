<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/header :: head}"></head>

<body>

<nav th:replace="~{fragments/header :: header}"></nav>

<div class="container">

    <!-- PAGE HEADER -->
    <div class="card">
        <div class="card-header">
            <h2>
                <i class="fas fa-users"></i>
                Applicants for:
                <span th:text="${job != null ? job.title : 'Unknown Job'}">Job Title</span>
            </h2>
        </div>
        <p>
            Below is the list of all students who have applied to this position.
        </p>
    </div>

    <!-- APPLICANTS TABLE -->
    <div th:if="${applications != null and !applications.empty}">
        <div class="table-wrapper">

            <table class="table">

                <thead>
                <tr>
                    <th>#</th>
                    <th>Student Name</th>
                    <th>Email</th>
                    <th>Applied On</th>
                    <th>Status</th>
                </tr>
                </thead>

                <tbody>

                <tr th:each="app, iterStat : ${applications}">
                    <td th:text="${iterStat.count}">1</td>
                    <td th:text="${app.student.fullName}">Student Name</td>
                    <td th:text="${app.student.email}">email</td>

                    <td>
                        <span th:text="${#temporals.format(app.appliedAt, 'MMM dd, yyyy')}">Date</span>
                    </td>

                    <td>
                        <span class="badge"
                              th:classappend="${app.status.name() == 'SUBMITTED' ? 'badge-submitted' :
                                              (app.status.name() == 'ACCEPTED' ? 'badge-approved' : 'badge-rejected')}"
                              th:text="${app.status}">
                        </span>
                    </td>
                </tr>

                </tbody>

            </table>
        </div>
    </div>

    <!-- EMPTY STATE -->
    <div class="empty-state" th:if="${applications == null or applications.empty}">
        <i class="fas fa-inbox"></i>
        <h3>No Applicants Yet</h3>
        <p>Nobody has applied to this job yet.</p>

        <a th:href="@{/employer/jobs}" class="btn btn-primary">
            <i class="fas fa-arrow-left"></i> Back to My Jobs
        </a>
    </div>

</div>

<footer th:replace="~{fragments/footer :: footer}"></footer>

</body>
</html>
